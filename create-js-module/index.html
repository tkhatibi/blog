<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/blog/component---src-layouts-index-js-cc75e3949a9b4ecb1d2f.js" as="script"/><link rel="preload" href="/blog/component---src-templates-blog-post-js-cc95e866a200855fed72.js" as="script"/><link rel="preload" href="/blog/path---create-js-module-e2d44640e81aea615178.js" as="script"/><link rel="preload" href="/blog/app-3cd9782fbd52a1fc0f7c.js" as="script"/><link rel="preload" href="/blog/commons-33a4ef356bd50d18692a.js" as="script"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><title data-react-helmet="true">ایجاد ماژول‌های جاواسکریپت | تورج خطیبی</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;width:100%;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;padding:5px;overflow:auto;direction:ltr;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}code.language-text{background-color:#EEE;color:red;padding-left:5px;padding-right:5px;direction:ltr;}a > code.language-text{color:purple;}pre.language-command{background-color:black;color:white;}pre.language-markdown{background-color:#EEE;}pre.language-javascript{background-color:#EEE;}</style><style id="gatsby-inlined-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/blog/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/blog/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/blog/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/blog/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/blog/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/blog/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/blog/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/blog/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/blog/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/blog/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/blog/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/blog/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/blog/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/blog/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/blog/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/blog/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/blog/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/blog/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/blog/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/blog/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/blog/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/blog/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/blog/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/blog/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/blog/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/blog/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/blog/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/blog/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/blog/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/blog/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/blog/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/blog/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/blog/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/blog/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/blog/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/blog/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/blog/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/blog/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/blog/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/blog/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/blog/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/blog/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/blog/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/blog/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/blog/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/blog/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/blog/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/blog/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/blog/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/blog/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/blog/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/blog/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:42rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;direction:rtl;" data-reactroot="" data-reactid="1" data-react-checksum="-1834897711"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/blog/" data-reactid="3">بلاگ تورج خطیبی</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">ایجاد ماژول‌های جاواسکریپت</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="7">June 02, 2018</p><div data-reactid="8"><p>چند وقت پیش نیاز بود یه ماژول جاواسکریپتی برای تبدیل متن عربی به فارسی بنویسم،
که نتیجه‌ش شد
<a href="https://www.npmjs.com/package/arabic-to-persian">arabic-to-persian</a>.
ماژول فوق‌العاده ساده‌ایه،
ولی چند تا چیز خوب باهاش یاد گرفتم،
که چون دوست دارم کامیت‌های ماژول بعدیم مرتب‌تر باشه،
باید ترتیب کارها رو برای خودم مستند می‌کردم.
پس شد آنچه شد.</p>
<h2>دور زدن config ها</h2>
<p>در فرآیند توسعه (خواه ماژول، خواه یک اپلیکیشن) ابزارهایی داریم تحت عنوان
task runner
که برای خودکارسازی کارهای روتین، حوصله‌سربر و از زیردست‌دررو استفاده می‌شن.
عموما این تسک‌رانرها با جاواسکریپت نوشته شدند،
ولی می‌تونید در هر پروژه‌ای با هر زبان و فریم‌ورکی ازشون استفاده کنید.
grunt و
gulp
نمونه‌ای از این ابزارها هستند.
با اومدن node و npm نقش این ابزارها کمتر شد،
چرا که خیلی از این کارها رو npm scripts هم برای توسعه‌دهنده‌ها انجام می‌ده.
اما این کارهای روتین مثلا یعنی چه کارهایی؟</p>
<ul>
<li>اجرای تست‌ها قبل از هر کامیت</li>
<li>تهیه گزارش تست‌ها</li>
<li>بررسی و یکپارچه‌سازی استایل کدها قبل از هر کامیت</li>
<li>یکپارچه‌سازی عنوان و متن کامیت‌ها</li>
<li>ساخت نسخه‌های مختلف برای پلتفرم‌های مختلف</li>
<li>بهینه‌سازی نسخه‌ها</li>
<li>انتشار نسخه‌ها</li>
<li>تهیه مستندات</li>
<li>انتشار مستندات</li>
<li>تعیین شماره نسخه بعدی نرم‌افزار طبق <a href="https://semver.org">semver</a></li>
<li>ضمیمه تغییرات هر نسخه به همراه commit مربوطه، issue مربوطه و …</li>
<li>و الی ماشالله</li>
</ul>
<p><img src="/blog/etc-722330625a8a4793c08b5695efab52d0.gif" alt="etc"></p>
<p>خبر بد اینه که باید به task runner بفهمونید چه کارهایی انجام بده
و این خودش مستلزم کانفیگ پلاگین‌ها و ابزارهای دیگه‌ایه
که اگر نگم انرژی‌ای که ازتون می‌گیره
بیشتر از توسعه خود ماژول نیست،
کم‌تر هم نیست.</p>
<p>و خبر خوب اینکه
<a href="https://github.com/alexjoverm/typescript-library-starter">typescript-library-starter</a>
این کانفیگ‌ها رو براتون انجام داده.
من در ادامه پست با این boilerplate کار می‌کنم،
تا با هم کانفیگ‌ها رو دور بزنیم،
و روی ابزارهای مورد نیازمون تمرکز کنیم.
طبیعتا وقتی کاربرد این ابزارها رو یاد بگیرید،
دیگه محدود به این boilerplate نخواهید بود
و می‌تونید بر حسب نیاز از این ابزارها در پروژه‌های دیگه استفاده بکنید یا نکنید.</p>
<p><strong>سلب مسئولیت: کانفیگ‌ها در جاواسکریپت به سمت تموم شدن میل می‌کنن، ولی تموم نمی‌شن.</strong></p>
<p>اما چرا تایپ‌اسکریپت؟
مگه عنوان پست <strong>ایجاد ماژول‌های جاواسکریپت</strong> نبود؟
خب این سه تا علت داره:</p>
<ul>
<li>
<p>اول اینکه خدعه کردم.</p>
</li>
<li>
<p>دوم اینکه بنده از این جاواسکریپت خیلی بدم میاد.</p>
</li>
<li>
<p>و در آخر اینکه خب تایپ‌اسکریپت همون جاواسکریپت سروسامون‌یافته‌تر هست.
منتها به خاطر استاتیک‌تایپ بودنش
IDE ها می‌تونن با نمایش پیشنهادها و نوع پارامترهای مجاز،
در روند توسعه کمک‌تون کنند،
که خود این مسئله منجر به کاهش خطاها در زمان اجرا،
ساختار منطقی‌تر، کدهای خواناتر و نگهداری ساده‌تر میشه.
جدای از تمام برتری‌های فنی،
برنامه‌نویسی با تایپ‌اسکریپت لذت‌بخش‌تر هم هست.
پس اگر یک هفته برای یادگیری تایپ‌اسکریپت کنار بذارید،
به خودتون،
سایر مشارکت‌کننده‌ها،
توسعه‌دهنده‌هایی که از کتابخا‌نه‌تون استفاده می‌کنند،
و جامعه بشریت کمک بزرگی کردید.</p>
</li>
</ul>
<h2>راه‌اندازی پروژه</h2>
<ul>
<li>
<p>اول به
<a href="https://github.com/new">اینجا</a>
برید و یه مخزن جدید بسازید.
بهتره نام مخزن بصورت <code class="language-text">kebab-case.js</code> باشه.</p>
</li>
<li>
<p>دستورهای زیر رو به ترتیب اجرا کنید،
و وقتی ازتون نام پروژه پرسیده شد،
پسوند <code class="language-text">js</code> رو وارد نکنید:</p>
</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">git clone https://github.com/alexjoverm/typescript-library-starter.git YOUR_REPOSITORY
cd YOUR_REPOSITORY
npm install
git remote set-url origin https://github.com/YOUR_USERNAME/YOUR_REPOSITORY.git</code></pre>
      </div>
<ul>
<li>الان می‌تونید اولین کامیت خودتون رو ثبت کنید.
ولی با یه راه باحال‌تر اینکار رو انجام بدید:</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">git add .
npm run commit</code></pre>
      </div>
<p>  سوال اول مربوط به نوع تغییرات هست.</p>
<p>  سوال دوم از شما می‌خواد مشخص کنید که این تغییرات مرتبط با کدوم فرآیند، پلتفرم، وابستگی،‌ کامپوننت یا … پروژه‌ست.</p>
<p>  سوال سوم و چهارم به ترتیب شرح خلاصه و مفصل تغییرات شماست.</p>
<p>  سوال پنجم مربوط به
<a href="https://en.wiktionary.org/wiki/breaking_change">breaking change</a>
های پروژه‌ست.
تغییراتی که در این کامیت منجر به ناسازگاری با نسخه‌های قبلی شده‌اند رو شرح بدید.
اما اگر
<a href="https://fa.wikipedia.org/wiki/%D8%B3%D8%A7%D8%B2%DA%AF%D8%A7%D8%B1%DB%8C_%D8%B9%D9%82%D8%A8%D8%B1%D9%88">backward compatible</a>
بود جوابش رو ندید.</p>
<p>  و در سوال آخر اگر این کامیت برای بستن issue خاصی ثبت می‌شه
شماره issue مربوطه رو با فرمت مثلا <code class="language-text">#64</code> ذکر کنید.</p>
<p>  حالا ببینید محتوای کامیت تولید شده چی هست:</p>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">git log</code></pre>
      </div>
<p>  از این به بعد کامیت‌های شما و بقیه مشارکت‌کننده‌ها استایل مشترکی خواهند داشت.
و شاید باورتون نشه، ولی این کمترین کاری هست که
<a href="http://commitizen.github.io/cz-cli/"><code class="language-text">commitizen</code></a>
داره براتون انجام می‌ده.
با وظیفه مهم‌ترش وقتی آشنا می‌شید،
که <code class="language-text">semantic-release</code> آماده به کار شده باشه.
پس اندکی صبر، اون قسمتش نزدیکست.</p>
<ul>
<li>
<p><a href="https://semantic-release.gitbooks.io/semantic-release/"><code class="language-text">semantic-release</code></a>
کامیت‌های منتشرنشده پروژه شما رو می‌خونه،
طبق مقادیری که ‍‍<code class="language-text">commitizen</code> به کمک
<a href="https://github.com/conventional-changelog/conventional-changelog"><code class="language-text">conventional-changelog</code></a>
به متن این کامیت‌ها اضافه کرده،
تغییرات <code class="language-text">major</code> و <code class="language-text">manor</code> و <code class="language-text">patch</code> رو تشخیص می‌ده،
گزارش تغییرات نسخه جدید رو آماده می‌کنه،
و در آخر نتیجه رو نشونتون می‌ده.</p>
<p>این بود وظیفه مهم‌تر <code class="language-text">commitizen</code>.</p>
</li>
</ul>
<p><img src="/blog/setup-933c145ddbb62713d32afb8cf0de4de6.gif" alt="setup"></p>
<p>  از اونجایی که برای استفاده از
<code class="language-text">semantic-release</code>
و انتشار مستندات
باید آدرس مخزن پروژه تعریف شده باشه،
فایل <code class="language-text">package.json</code> رو باز کنید و در قسمت <code class="language-text">git.url</code> آدرس
<code class="language-text">https://github.com/YOUR_USERNAME/YOUR_REPOSITORY.git</code>
رو وارد کنید.</p>
<p>  اگر از ویندوز استفاده می‌کنید، قبل از دستورهای بعدی این دستور رو اجرا کنید:
(من امکان تست این مورد رو نداشتم و صرفا چون در
<a href="https://github.com/alexjoverm/typescript-library-starter#automatic-releases">مستندات</a>
ذکر شده بود، این رو اضافه کردم)</p>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">npm install --global --production windows-build-tools</code></pre>
      </div>
<p>  دستورات زیر رو به ترتیب اجرا کنید (حتی شما یونیکسی عزیز)،
و وقتی ازتون پرسید <code class="language-text">travis.yml</code> رو ایجاد کنه یا نه،
<code class="language-text">NO</code> رو انتخاب کنید، چون زحمت کانفیگ این فایل از قبل کشیده شده.</p>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">npm run semantic-release-prepare
npm install -g semantic-release-cli
semantic-release-cli setup</code></pre>
      </div>
<p>  با دستور اول دو تا <code class="language-text">git hook</code> جدید به لیست اسکریپت‌های <code class="language-text">package.json</code> اضافه می‌شن.
<code class="language-text">prepush</code> که قبل از هر پوش صحت build و پوشش تست‌ها و استایل کدها رو بررسی می‌کنه
تا ضمانت کنه تغییرات شما منجر به fail شدن فرآیند ساخت نمی‌شه،
و <code class="language-text">commitmsg</code> که به شما اجازه اجرای <code class="language-text">git commit</code> رو نمی‌ده و
به جاش <code class="language-text">npm run commit</code> رو بهتون پیشنهاد می‌ده.</p>
<ul>
<li>
<p><a href="https://travis-ci.org/">Travis CI</a>
ابزاری برای خودکارسازی فرآیندهای
تست، ساخت و انتشار پروژه هست.
برای فعال‌سازی CI پروژه
<a href="https://travis-ci.org/profile/">اینجا</a>
برید و سوییچ مخزن‌تون رو روشن کنید.</p>
<p>بعد به
<a href="https://github.com/settings/tokens">اینجا</a>
برید و یک توکن جدید ایجاد کنید.
دقت کنید که در قسمت <code class="language-text">Select scopes</code> حتما <code class="language-text">repo</code> و مشتقاتش انتخاب شده باشند.
این توکن دیگه به شما نشون داده نمی‌شه،
پس در حفظ و نگهداری توکن کوشا باشید و اون رو در جایی امن نگه‌داری کنید.
طبیعتا این جای امن داخل پروژه نخواهد بود.</p>
<p>برای فعالسازی <code class="language-text">semantic-release</code> به یه توکن <code class="language-text">npm</code> هم نیاز دارید.
اگر هنوز عضو سایت <code class="language-text">npm</code> نیستید از
<a href="https://www.npmjs.com/signup">اینجا</a>
می‌تونید ثبت‌نام کنید.
بعد دستور زیر رو اجرا کنید
و برای توکن ایجاد شده، همون مواردی که برای توکن گیت‌هاب اشاره کردم رو عینا رعایت کنید.</p>
</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">npm token create</code></pre>
      </div>
<p>  بعد به آدرس
<code class="language-text">https://travis-ci.org/YOUR_USERNAME/YOUR_REPOSITORY/settings</code>
برید و در قسمت <code class="language-text">Environment Variables</code>
مقدار توکن گیت‌هاب رو با عنوان <code class="language-text">GH_TOKEN</code> به لیست متغیرها اضافه کنید.
همین کار رو مجددا برای توکن <code class="language-text">npm</code> و این‌بار با عنوان <code class="language-text">NPM_TOKEN</code> تکرار کنید.
حواستون باشه سوییچ ‍‍‍<code class="language-text">Display value in build log</code> در هر دو مورد خاموش باشه،
چرا که درغیراینصورت اون حفظ و نگه‌داری‌ای که بهش اشاره شد به طور کامل نقض می‌شه.</p>
<p>  از این به بعد با هربار push و pull request،
تراویس وظایفی که در <code class="language-text">travis.yml</code> تعریف شده رو براتون انجام می‌ده،
کارهایی مثل تست و به‌روزرسانی coverage و مستندات پروژه.
اگر نیاز بود وظایف دیگه‌ای هم به این لیست اضافه شه، به
<a href="https://docs.travis-ci.com/">مستندات تراویس</a>
مراجعه کنید.</p>
<p>  برای اینکه نتیجه آخرین اجرای CI هم همیشه در معرض دید باشه،
بهتره که برچسب build رو به <code class="language-text">README.md</code> پروژه اضافه کنید:</p>
<div class="gatsby-highlight">
      <pre class="language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> PROJECT_NAME</span>

[![Build Status](https://travis-ci.org/YOUR<span class="token italic"><span class="token punctuation">_</span>USERNAME/YOUR<span class="token punctuation">_</span></span>REPOSITORY.svg?branch=master)](https://travis-ci.org/YOUR<span class="token italic"><span class="token punctuation">_</span>USERNAME/YOUR<span class="token punctuation">_</span></span>REPOSITORY)</code></pre>
      </div>
<ul>
<li>
<p><code class="language-text">coveralls</code> هم ابزاری برای رصد کردن کیفیت کلی پروژه هست،
و برای پروژه‌های متن‌باز رایگانه.
اگر هنوز عضو سایتش نیستید، از
<a href="https://coveralls.io/sign-up">اینجا</a>
می‌تونید ثبت‌نام کنید.</p>
<p>برای فعال‌سازی coverage پروژه
<a href="https://coveralls.io/repos/new">اینجا</a>
برید و سوییچ مخزن نگهدارنده پروژه رو روشن کنید.</p>
<p>و در آخر به برچسب build که در قدم قبلی به <code class="language-text">README.md</code> اضافه کردید،
برچسب coverage رو هم اضافه کنید:</p>
</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-markdown"><code class="language-markdown">[![Coverage Status](https://coveralls.io/repos/github/YOUR<span class="token italic"><span class="token punctuation">_</span>USERNAME/YOUR<span class="token punctuation">_</span></span>REPOSITORY/badge.svg?branch=master)](https://coveralls.io/github/YOUR<span class="token italic"><span class="token punctuation">_</span>USERNAME/YOUR<span class="token punctuation">_</span></span>REPOSITORY?branch=master)</code></pre>
      </div>
<ul>
<li>اگر به ویژگی‌های فانکشنال مثل <code class="language-text">Promise</code> در کتابخانه‌تون نیاز داشتید،
می‌تونید از <code class="language-text">polyfill</code> هایی مثل
<a href="https://github.com/zloirock/core-js"><code class="language-text">core-js</code></a>
استفاده کنید. برای نصب دستور زیر رو اجرا کنید:</li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">npm i -D core-js</code></pre>
      </div>
<p>  و برای استفاده بالای <code class="language-text">entry script</code> (فایلی که برنامه از اون شروع می‌شه) کتابخانه،
<code class="language-text">polyfill</code> های مورد نیازتون رو <code class="language-text">import</code> کنید:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">"core-js/fn/array/find"</span>
<span class="token keyword">import</span> <span class="token string">"core-js/fn/string/includes"</span>
<span class="token keyword">import</span> <span class="token string">"core-js/fn/promise"</span></code></pre>
      </div>
<h2>چند تا نکته</h2>
<ul>
<li>
<p>به آدرس <code class="language-text">https://YOUR_USERNAME.github.io/YOUR_REPOSITORY</code> برید
و از دیدن مستنداتی که
<a href="http://typedoc.org/"><code class="language-text">typedoc</code></a>
براتون ایجاد کرده لذت ببرید.</p>
</li>
<li>
<p>اگر کتابخانه شما وابسته به ماژولی از نوع <code class="language-text">peerDependeny</code>
(ماژولی که لازم نیست در خروجی نهایی <code class="language-text">import</code> بشه)
بود،
فایل <code class="language-text">rollup.config.js</code> رو باز کنید و نام اون ماژول رو به آرایه <code class="language-text">external</code> اضافه کنید.</p>
</li>
<li>
<p>تا می‌تونید از نصب وابستگی‌های پروژه به صورت <code class="language-text">global</code> پرهیز کنید،
و کامندهای مرتبط با هر ماژول رو به <code class="language-text">npm scripts</code> اضافه کنید،
اینجوری مشارکت برای سایر توسعه‌دهنده‌ها راحت‌تر می‌شه.</p>
</li>
</ul>
<h2>انتشار کتابخانه</h2>
<div class="gatsby-highlight">
      <pre class="language-command"><code class="language-command">npm publish</code></pre>
      </div>
<p><img src="/blog/publish-9c5b49646e9365d80fb154f571043eb8.gif" alt="publish"></p></div><hr style="margin-bottom:1.75rem;" data-reactid="9"/><div style="display:flex;margin-bottom:4.375rem;" data-reactid="10"><img src="https://en.gravatar.com/userimage/123141848/d17f0105a97257400b42b5643422965a.jpeg" alt="Kyle Mathews" style="margin-left:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem;" data-reactid="11"/><p data-reactid="12"><strong data-reactid="13">تورج خطیبی</strong><!-- react-text: 14 --> هستم، توسعه‌دهنده نرم‌افزار، مشتاق به یادگیری استانداردها، ناچار به یادگیری ابزارها، و متنفر از یادگیری تنظیمات.<!-- /react-text --></p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;" data-reactid="15"><li data-reactid="16"><a rel="prev" href="/blog/hello-world/" data-reactid="17"><!-- react-text: 18 -->→ <!-- /react-text --><!-- react-text: 19 -->سلام دنیا!<!-- /react-text --></a></li><li data-reactid="20"></li></ul></div><span style="display:block;clear:both;" data-reactid="21"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-3cd9782fbd52a1fc0f7c.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-cc95e866a200855fed72.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-1d5e1295a5811ceb68b0.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","127523925242981":"path---create-js-module-e2d44640e81aea615178.js","144342403179678":"path---hello-world-5853954d74267f932c15.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-60cbe522d8f1e41f14cf.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-cc75e3949a9b4ecb1d2f.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto');
      }
      </script><script>/*<![CDATA[*/["/blog/commons-33a4ef356bd50d18692a.js","/blog/app-3cd9782fbd52a1fc0f7c.js","/blog/path---create-js-module-e2d44640e81aea615178.js","/blog/component---src-templates-blog-post-js-cc95e866a200855fed72.js","/blog/component---src-layouts-index-js-cc75e3949a9b4ecb1d2f.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>